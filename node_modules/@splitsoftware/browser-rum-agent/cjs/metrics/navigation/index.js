"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.onNavigationTimingMetrics = void 0;
// import { getTTFB } from './ttfb';
var ttdi_1 = require("./ttdi");
var plt_1 = require("./plt");
var whenLoaded_1 = require("../../utils/whenLoaded");
/**
 * Calculates navigation performance metrics using the Navigation Timing API.
 * Metrics:
 * - time.to.first.byte
 * - time.to.dom.interactive
 * - page.load.time
 */
function onNavigationTimingMetrics(ctx) {
    var getMetrics = function () {
        var ttdi = (0, ttdi_1.getTTDI)(), 
        // ttfb = getTTFB(),
        plt = (0, plt_1.getPLT)();
        if (ttdi)
            ctx.track(ttdi);
        // @TODO regarding `time.to.first.byte`, either rename to `server.time.to.first.byte`, update its definition (https://web.dev/ttfb/), or remove it. For now, the metric is also provided by webVitals collector.
        // if (ttfb) ctx.track(ttfb);
        if (plt)
            ctx.track(plt);
    };
    (0, whenLoaded_1.whenLoaded)(getMetrics);
    return {
        flush: getMetrics
    };
}
exports.onNavigationTimingMetrics = onNavigationTimingMetrics;
